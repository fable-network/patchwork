!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("patchwork",[],n):"object"==typeof exports?exports.patchwork=n():e.patchwork=n()}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=4)}([function(e,n){e.exports=require("react")},function(e,n,t){e.exports=t(3)},function(e,n){e.exports=require("react-dom")},function(e,n){e.exports=require("regenerator-runtime")},function(e,n,t){"use strict";t.r(n);var r=t(1),o=t.n(r);function u(e,n,t,r,o,u,c){try{var i=e[u](c),a=i.value}catch(e){return void t(e)}i.done?n(a):Promise.resolve(a).then(r,o)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var c=e.apply(n,t);function i(e){u(c,r,o,i,a,"next",e)}function a(e){u(c,r,o,i,a,"throw",e)}i(void 0)})}}function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,o=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(t.push(c.value),!n||t.length!==n);r=!0);}catch(e){o=!0,u=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw u}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)t=u[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)t=u[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var f=t(0),l=t.n(f);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){s(e,n,t[n])})}return e}var d={},m={};var y=function(e){var n=e.name,t=e.componentName,r=void 0===t?null:t,u=e.basePath,s=a(e,["name","componentName","basePath"]),p=l.a.createRef(),y=i(Object(f.useState)(null),2),b=y[0],v=y[1];return Object(f.useEffect)(function(){var e=function(e,n,t){return m[e]||(m[e]=[]),m[e].push(t),d[e]&&t(d[e]),function(){m[e]=m[e].filter(function(e){return e!==t})}}(n,0,function(e){var t=e.components,o=void 0===t?{}:t,c=a(e,["components"]),i=null===r?c:o[r];if(i){var f=i.mount,l=i.unmount;console.log(">>>> calling ",n,r||"","MOUNT on",p.current),f(p.current,u,s),v(l)}});return c(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!b){t.next=4;break}return console.log(">>>> calling ",n,r||"","UNMOUNT on",p.current),t.next=4,b();case 4:e();case 5:case"end":return t.stop()}},t)}))},[n,r]),l.a.createElement("div",{ref:p})},b=t(2),v=t.n(b),h=function(e,n,t){return{name:e,mount:function(e){return v.a.render(l.a.createElement(n,t),e),Promise.resolve()},unmount:function(){return Promise.resolve()}}},w=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"function"!=typeof window.define&&(window.define=(e=c(o.a.mark(function e(n,t){var r,u,c,i,f,l,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=("function"==typeof n?n:t)(),u=r.bootstrap,c=r.mount,i=r.unmount,e.next=5,u();case 5:f=e.sent,l=f.name,s=a(f,["name"]),console.log(">>>>> Registered child app: ",l),d[l]=p({mount:c,unmount:i},s),m[l]&&m[l].forEach(function(e){return e(d[l])});case 10:case"end":return e.stop()}},e)})),function(n,t){return e.apply(this,arguments)}),window.define.amd=!0),Object.keys(n).forEach(function(e){var t=document.createElement("script");t.setAttribute("src",n[e]),document.body.appendChild(t)})};t.d(n,"registerComponent",function(){return h}),t.d(n,"registerManifest",function(){return w}),t.d(n,"PatchworkComponent",function(){return y});n.default=y}])});